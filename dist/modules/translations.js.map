{
  "version": 3,
  "sources": ["../../src/modules/translations.ts"],
  "sourcesContent": ["interface UpdateTranslationsArgs {\n  stringsClass: Record<string, string>;\n  translationsPublicPath: string;\n}\n\nexport const updateTranslations = async (\n  args: UpdateTranslationsArgs\n): Promise<boolean> => {\n  const get = (url: string): Promise<Record<string, string>> => {\n    return new Promise((resolve, reject) => {\n      fetch(url, {\n        method: \"GET\",\n      })\n        .then(function (response) {\n          if (response.ok) {\n            return response.json();\n          } else {\n            return reject(\"Translation file not found. Code error kj438dj.\");\n          }\n        })\n        .then(function (data) {\n          return resolve(data);\n        })\n        .catch(function (error) {\n          return reject(\"Translation file not found. Code error kj438dssj.\");\n        });\n    });\n  };\n\n  return new Promise(async (resolve, reject) => {\n    if (!window.localStorage.getItem(\"lang\")) return resolve(true);\n    const localLang = window.localStorage.getItem(\"lang\");\n    const file = `${args.translationsPublicPath}/${localLang}.json`;\n    let data: Record<string, string>;\n    try {\n      data = await get(file);\n    } catch (e) {\n      console.warn(\n        `WinnetouJs translations error. Reloading... The file '${file}' was not found.`\n      );\n      window.localStorage.removeItem(\"lang\");\n      setTimeout(() => {\n        location.reload();\n      }, 200);\n      return;\n    }\n    Object.keys(data).map(key => {\n      let value = data[key];\n      args.stringsClass[key] = value;\n    });\n    return resolve(true);\n  });\n};\n\nexport const changeLang = (lang: string, reload: boolean = true): void => {\n  window.localStorage.setItem(\"lang\", lang);\n  reload && location.reload();\n};\n"],
  "mappings": "AAKO,MAAM,qBAAqB,OAChC,SACqB;AACrB,QAAM,MAAM,CAAC,QAAiD;AAC5D,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,YAAM,KAAK;AAAA,QACT,QAAQ;AAAA,MACV,CAAC,EACE,KAAK,SAAU,UAAU;AACxB,YAAI,SAAS,IAAI;AACf,iBAAO,SAAS,KAAK;AAAA,QACvB,OAAO;AACL,iBAAO,OAAO,iDAAiD;AAAA,QACjE;AAAA,MACF,CAAC,EACA,KAAK,SAAU,MAAM;AACpB,eAAO,QAAQ,IAAI;AAAA,MACrB,CAAC,EACA,MAAM,SAAU,OAAO;AACtB,eAAO,OAAO,mDAAmD;AAAA,MACnE,CAAC;AAAA,IACL,CAAC;AAAA,EACH;AAEA,SAAO,IAAI,QAAQ,OAAO,SAAS,WAAW;AAC5C,QAAI,CAAC,OAAO,aAAa,QAAQ,MAAM,EAAG,QAAO,QAAQ,IAAI;AAC7D,UAAM,YAAY,OAAO,aAAa,QAAQ,MAAM;AACpD,UAAM,OAAO,GAAG,KAAK,sBAAsB,IAAI,SAAS;AACxD,QAAI;AACJ,QAAI;AACF,aAAO,MAAM,IAAI,IAAI;AAAA,IACvB,SAAS,GAAG;AACV,cAAQ;AAAA,QACN,yDAAyD,IAAI;AAAA,MAC/D;AACA,aAAO,aAAa,WAAW,MAAM;AACrC,iBAAW,MAAM;AACf,iBAAS,OAAO;AAAA,MAClB,GAAG,GAAG;AACN;AAAA,IACF;AACA,WAAO,KAAK,IAAI,EAAE,IAAI,SAAO;AAC3B,UAAI,QAAQ,KAAK,GAAG;AACpB,WAAK,aAAa,GAAG,IAAI;AAAA,IAC3B,CAAC;AACD,WAAO,QAAQ,IAAI;AAAA,EACrB,CAAC;AACH;AAEO,MAAM,aAAa,CAAC,MAAc,SAAkB,SAAe;AACxE,SAAO,aAAa,QAAQ,QAAQ,IAAI;AACxC,YAAU,SAAS,OAAO;AAC5B;",
  "names": []
}
